<div class="topology-row">
  <!-- TOPOLOGY display -->
  <div id="topology" class="topology-columns" >
    <div class="well topology" alien-droppable drag-data="" drag-on-drop="onComponentDragged(data)" ng-init="visual = true; simple = false">
      <div class="btn-toolbar pull-left">
        <div class="btn-group">
          <a class="btn btn-default btn-xs" ng-click="visual = true; simple = false">{{'APPLICATIONS.TOPOLOGY.VISUAL_DETAILED' | translate}}</a>
          <a class="btn btn-default btn-xs" ng-click="visual = true; simple = true">{{'APPLICATIONS.TOPOLOGY.VISUAL_SIMPLE' | translate}}</a>
          <a class="btn btn-default btn-xs" ng-click="visual = false">{{'APPLICATIONS.TOPOLOGY.YAML' | translate}}</a>
        </div>
      </div>
      <div ng-if="!visual" ng-model="editorContent" ui-ace="{mode: 'yaml'}" style="height: {{dimensions.height}}px;"></div>

      <topology-rendering ng-if="visual && topology" dimensions="dimensions" topology="topology" callback="selectNodeTemplate(newSelectedName, oldSelectedName)" simple="simple" runtime="false" />
    </div>
  </div>

    <!-- NodeTemplate details -->
  <div class="topology-columns topology-details">
    <select id="version-select" ng-model="selectedVersion" class="form-control " ng-options="appVersion.version for appVersion in appVersions"
      ng-change="changeVersion(selectedVersion)">
    </select>

    <tabset style="height: {{dimensions.height}}px; overflow: auto; padding-top: 12px;">
      <tab>
        <!-- Components search -->
        <tab-heading id="components-search">
           <i class="fa fa-plus"></i> {{'APPLICATIONS.TOPOLOGY.ADD_NODETEMPLATE' | translate}}
        </tab-heading>
        <div id="slide-side-bar">
          <alien-search-component refresh="refresh"
            display-detail-pannel="false"
            on-select-item="nodeTypeSelected(item)"
            drag-and-drop-enabled="true"
            height-info="dimensions">
          </alien-search-component>
        </div>
      </tab>
      <!-- Dependencies -->
      <tab>
        <tab-heading id="topology-dependencies">
          <i class="fa fa-archive"></i> {{'APPLICATIONS.TOPOLOGY.DEPENDENCY' | translate}}
        </tab-heading>
        <div>
          <div class="row">
            <div class="col-md-12" >
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>{{ 'APPLICATIONS.TOPOLOGY.DEPENDENCY_NAME' | translate}}</th>
                    <th>{{ 'APPLICATIONS.TOPOLOGY.DEPENDENCY_VERSION' | translate}}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="dependency in topology.topology.dependencies">
                    <td>{{dependency.name}}</td>
                    <td>{{dependency.version}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            </div>
        </div>
      </tab>

      <tab>
        <tab-heading id="nodetemplate-details">
           <i class="fa fa-list"></i> {{'APPLICATIONS.TOPOLOGY.PROPERTIES' | translate}}
        </tab-heading>
        <div ng-show="selectedNodeTemplate">
          <div class="row">
            <!-- nodeTemplateName div -->
            <div class="col-md-8">
              <h4 class="pull-left">
                <span editable-text="nodeNameObj.val" ng-show="editRights"  buttons="no" e-required onbeforesave="updateNodeName($data)" blur="submit">
                  {{ selectedNodeTemplate.name | split }}
                  <i class="fa fa-pencil-square-o"></i>
                </span>
                <span ng-show="!editRights">
                  {{ selectedNodeTemplate.name | split }}
                </span>
                <img ng-show="selectionabstract"
                  class="icon_16"
                  alt="abstract_ico_16"
                  tooltip="{{'COMPONENTS.COMPONENT.ABSTRACT_COMPONENT' | translate}}"
                  tooltip-placement="top"
                  src="images/abstract_ico.png"/>
              </h4>
            </div>
            <!-- buttons group div -->
            <div class="col-md-4">
              <div class="pull-right">

                <a tooltip="{{'APPLICATIONS.TOPOLOGY.REPLACE_NODETEMPLATE' | translate}}"
                  tooltip-append-to-body="true" class="btn btn-default btn-sm"
                  class="dropdown-toggle" data-toggle="dropdown"
                  ng-click="getPossibleReplacements(selectedNodeTemplate)">
                  <i class="fa fa-exchange"></i>
                </a>
                <ul class="dropdown-menu " role="menu" data-placement="left">
                  <li role="presentation" class="dropdown-header">{{'APPLICATIONS.TOPOLOGY.SELECT_NODETYPE' | translate }}</li>
                    <li  ng-repeat="suggestedNode in suggestedReplacements">
                      <a id="newnode_{{suggestedNode.elementId}}"
                        ng-click="swapNodeTemplate(selectedNodeTemplate, suggestedNode)">
                        <img ng-src="img?id={{getIcon(suggestedNode.tags)}}&quality=QUALITY_32" />&nbsp;
                          {{suggestedNode.elementId}}
                     </a>
                   </li>
                </ul>
        <span ng-if="isComputeType(selectedNodeTemplate)">
                  <a id="scaleButton" tooltip="{{'APPLICATIONS.TOPOLOGY.SCALE' | translate}}"
                    tooltip-append-to-body="true" class="btn btn-success btn-sm"
                    ng-click="addScalingPolicy(selectedNodeTemplate.name)"
                    ng-if="!topology.topology.scalingPolicies[selectedNodeTemplate.name]">
                    <i class="fa fa-reply fa-rotate-90 fa-inverse"></i>
                  </a>
                  <a id="unscaleButton" tooltip="{{'APPLICATIONS.TOPOLOGY.UNSCALE' | translate}}"
                    tooltip-append-to-body="true" class="btn btn-primary btn-sm"
                    ng-click="deleteScalingPolicy(selectedNodeTemplate.name)"
                    ng-if="topology.topology.scalingPolicies[selectedNodeTemplate.name]">
                    <i class="fa fa-reply fa-rotate-270 fa-inverse"></i>
                  </a>
        </span>

                <!-- Delete selected nodetemplate with confirm -->
                <delete-confirm id="btn-delete-node" func="deleteNodeTemplate(selectedNodeTemplate.name)" position="left" bssize="btn-sm" fastyle="fa-trash-o">
                </delete-confirm>

              </div>
           </div>
           <div class="col-md-12" ng-if="editRights && nodeTempNameEditError" style="margin-bottom: 10px;">
              <span class="text-danger">{{''+nodeTempNameEditError.code | translate}}</span>
            </div>
        </div>
        <div class="row">
          <div class="col-md-10">
            <div class="input-group">
              <span class="input-group-addon">
                <span><i>{{'APPLICATIONS.TOPOLOGY.TYPE' | translate}}</i></span>
              </span>
              <span class="form-control"> {{selectedNodeTemplate.type}} </span>
            </div>
          </div>
          <div class="col-md-2">
            <a class=" btn btn-default" href="/#/components/component/{{selectedNodeTemplate.type}}:{{topology.nodeTypes[selectedNodeTemplate.type].archiveVersion}}" target="_blank"><i class="fa fa-eye text-primary"></i></a>
          </div>
        </div>
        <div class="row" style="margin-top: 5px;">
          <div class="col-md-12">
            <div class="input-group">
              <span class="input-group-addon">
                <i class="fa fa-archive"></i>  {{topology.nodeTypes[selectedNodeTemplate.type].archiveName}}
              </span>
              <span class="form-control">
                {{topology.nodeTypes[selectedNodeTemplate.type].archiveVersion}}
              </span>
            </div>
          </div>
        </div>
          <!-- Properties -->
          <div ng-if="checkMapSize(selectedNodeTemplate.properties)">
            <div class="topology-node-expand clickable"
              ng-click="isPropertiesCollapsed = !isPropertiesCollapsed">
              <i class="pull-left fa"
                ng-class="{'fa-chevron-down' : !isPropertiesCollapsed, 'fa-chevron-right': isPropertiesCollapsed}"></i>
              <span>{{'APPLICATIONS.TOPOLOGY.PROPERTIES' | translate}}</span>
            </div>
            <!-- Test directive display property -->
            <div>
            </div>
            <div collapse="isPropertiesCollapsed" class="topology-level">
              <table class="table table-condensed" id="nodeTemplateProperties">

                <tr ng-repeat="property in selectedProperties"
                   ng-init="isPropertyRequired = isPropertyRequired(property.key)">

                  <td class="col-md-2" ng-class="{'property-required' : isPropertyRequired}">
                    <div class="btn-group" data-toggle="buttons">
                      <a id="p_input_{{property.key}}" ng-click="toggleInputProperty(property.key)" class="btn btn-default btn-xs" ng-class="{'active' : isInputProperty(property.key)}" tooltip="{{ 'APPLICATIONS.TOPOLOGY.PROPERTIES_INPUTS' | translate}}" tooltip-append-to-body="true">
                          <i class="fa fa-cogs"></i>
                      </a>
                      <a id="p_output_{{property.key}}" ng-click="toggleOutputProperty(property.key)" class="btn btn-default btn-xs" ng-class="{'active' : isOutputProperty(property.key)}" tooltip="{{ 'APPLICATIONS.TOPOLOGY.PROPERTIES_OUTPUTS' | translate}}" tooltip-append-to-body="true">
                          <i class="fa fa-eye"></i>
                      </a>
                    </div>
                  </td>

                  <td class="col-md-9">
                    <property-display
                            ng-init="condensed = true"
                            definition="getFormatedProperty(property.key)"
                            property-value="property.value"
                            on-save="updateProperty(propertyDefinition,propertyValue)"
                            editable="editRights"
                            condensed = "condensed">
                    </property-display>
                  </td>

                  <td class="col-md-1">
                    <button id="btn-description-{{property.key}}"
                      ng-if="getPropertyDescription(property.key)"
                      ng-click="openSimpleModal('MODAL.TITLE.PROPERTY', getPropertyDescription(property.key))"
                      class="btn btn-default btn-xs"
                      tooltip="{{ 'MODAL.TITLE.PROPERTY' | translate}}"
                      tooltip-append-to-body="true">
                      <i class="fa fa-question-circle"></i>
                    </button>
                  </td>
                </tr>
              </table>
            </div>
          </div>

          <!-- Attributes -->
          <div ng-if="checkMapSize(selectedNodeTemplate.attributes)">
            <div class="topology-node-expand clickable"
              ng-click="isAttributesCollapsed = !isAttributesCollapsed">
              <i class="pull-left fa"
                ng-class="{'fa-chevron-down' : !isAttributesCollapsed, 'fa-chevron-right': isAttributesCollapsed}"></i>
              <span>{{'APPLICATIONS.TOPOLOGY.ATTRIBUTES' | translate}}</span>
            </div>
            <div collapse="isAttributesCollapsed" class="topology-level">
              <table class="table table-condensed" id="nodeTemplateAttributes">
                <tr ng-repeat="(attributeKey,attributeValue) in selectedNodeTemplate.attributes">
                  <td class="col-md-2">
                    <div class="btn-group" data-toggle="buttons">
                      <a id="a_output_{{attributeKey}}" ng-click="toggleOutputAttribute(attributeKey)" class="btn btn-default btn-xs" ng-class="{'active' : isOutputAttribute(attributeKey)}" tooltip="{{ 'APPLICATIONS.TOPOLOGY.PROPERTIES_OUTPUTS' | translate}}" tooltip-append-to-body="true">
                        <i class="fa fa-eye"></i>
                      </a>
                    </div>
                  </td>
                  <td class="col-md-10">
                    <span><em>{{attributeKey}}</em></span>
                  </td>
                </tr>
              </table>
            </div>
          </div>

          <!-- Artifacts -->
          <div ng-if="checkMapSize(selectedNodeTemplate.artifacts)">
            <div class="topology-node-expand clickable"
              ng-click="isArtifactsCollapsed = !isArtifactsCollapsed">
              <i class="pull-left fa"
                ng-class="{'fa-chevron-down' : !isArtifactsCollapsed, 'fa-chevron-right': isArtifactsCollapsed}">
              </i><span>{{'APPLICATIONS.TOPOLOGY.ARTIFACTS' | translate}}</span>
            </div>
            <div collapse="isArtifactsCollapsed">
              <div class="topology-level"
                ng-repeat="(artifactId, artifactDefinition) in selectedNodeTemplate.artifacts">
                <div class="topology-node-expand clickable"
                  ng-click="isArtifactCollapsed = !isArtifactCollapsed">
                  <i class="pull-left fa"
                    ng-class="{'fa-chevron-down' : !isArtifactCollapsed, 'fa-chevron-right': isArtifactCollapsed}"></i>
                  <span>{{artifactId}}</span>

                  <i class="fa fa-fw "
                    ng-click="updateInputArtifactList(artifactId); $event.stopPropagation();"
                    tooltip="{{'APPLICATIONS.TOPOLOGY.ARTIFACTS_CHECK_INPUT' | translate}}"
                    ng-class="{'fa-check-square-o text-success' : ( artifactChecked = isInputArtifact(artifactId) ),  'fa-square-o': !artifactChecked}"></i>

                </div>
                <div class="topology-level" collapse="isArtifactCollapsed">
                  <div class="row">
                    <div class="col-md-3">{{'APPLICATIONS.TOPOLOGY.TYPE' | translate}}</div>
                    <div class="col-md-9">{{artifactDefinition.artifactType}}</div>
                  </div>
                  <div class="row">
                    <div class="col-md-3">{{'APPLICATIONS.TOPOLOGY.REFERENCE' | translate}}</div>
                    <div class="col-md-9">
                      <div ng-if="!uploads[artifactId].isUploading">
                        <span tooltip="{{artifactDefinition.artifactName}}" tooltip-trigger="{{{true: 'mouseenter', false: 'never'}[artifactDefinition.artifactName.length > 20]}}">{{artifactDefinition.artifactName | truncate:20}}</span>
                        <div class="fileUploadImg btn" tooltip="{{'APPLICATIONS.TOPOLOGY.UPDATE_ARTIFACT' | translate}}">
                          <span>
                            <i class="fa fa-upload text-primary"></i>
                          </span>
                          <input type="file" class="upload" ng-file-select="onArtifactSelected($files, artifactId)">
                        </div>
                      </div>
                      <progressbar ng-if="uploads[artifactId].isUploading" class="progress-striped active" value="uploads[artifactId].uploadProgress" type="{{uploads[artifactId].type}}" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Requirements -->
          <div ng-if="checkMapSize(selectedNodeTemplate.requirements)">
            <div class="topology-node-expand clickable"
              ng-click="isRequirementsCollapsed = !isRequirementsCollapsed">
              <i class="pull-left fa"
                ng-class="{'fa-chevron-down' : !isRequirementsCollapsed, 'fa-chevron-right': isRequirementsCollapsed}"></i>
              <span>{{'APPLICATIONS.TOPOLOGY.REQUIREMENTS' | translate}}</span>
            </div>
            <div collapse="isRequirementsCollapsed" class="topology-level">
              <div ng-repeat="(requirementName,requirement) in selectedNodeTemplate.requirements"
                ng-init ="isReqPropsCollapsed = {}; emptyProps = !checkMapSize(selectedNodeTemplate.requirements[requirementName].properties)">
                <div class="topology-node-expand" style="font-weight: normal"
                  ng-class="{'clickable' : !emptyProps}"
                  ng-click="isReqPropsCollapsed[requirementName] = !isReqPropsCollapsed[requirementName]">
                  <div class="row">
                    <div class="col-md-3">
                     <i ng-if = "!emptyProps" class="pull-left fa"
                        ng-class="{'fa-chevron-down' : !isReqPropsCollapsed[requirementName], 'fa-chevron-right': isReqPropsCollapsed[requirementName]}">
                      </i>
                      <span>{{requirementName}}</span>
                    </div>
                    <div class="col-md-3" id="requirement-{{requirementName}}">
                      <span  tooltip="{{requirement.type}}"
                        tooltip-append-to-body="true" >{{getShortName(requirement.type)}}</span>
                    </div>
                    <div class="col-md-4">
                      <span class="btn-group pull-right">
                        <button tooltip="{{'APPLICATIONS.TOPOLOGY.ADD_RELATIONSHIP' | translate}}"
                          ng-disabled="!requirement.canAddRel.yes"
                            tooltip-append-to-body="true" class="btn btn-default btn-xs" ng-click="openSearchRelationshipModal(selectedNodeTemplate.name, selectedNodeTemplate, requirementName, requirement); $event.stopPropagation();" id="btn-add-relationship-{{requirementName}}">
                            <i class="fa fa-link"></i>
                        </button>
                        <span  class="btn btn-default btn-xs cardinalities_show"
                        tooltip="{{'APPLICATIONS.TOPOLOGY.CARDINALITIES_TOOLTIP' | translate}}"
                        tooltip-append-to-body="true">
                            {{requirement.lowerBound}}..{{requirement.upperBound | replaceAll:'unbounded':'&infin;' }}
                            ({{requirement.canAddRel.remaining | replaceAll:'unbounded':'&infin;' }})
                        </span>
                      </span>
                    </div>
                    <div class="col-md-1" ng-init="reqComp = getComponent(selectedNodeTemplate, requirement.type)">
                      <button id="btn-component-description-{{requirementName}}"
                        ng-if="reqComp.data.description"
                        ng-click="openSimpleModal('MODAL.TITLE.REQUIREMENT', reqComp.data.description)"
                        class="btn btn-default btn-xs" tooltip="{{ 'MODAL.TITLE.REQUIREMENT' | translate}}"
                        tooltip-append-to-body="true">
                        <i class="fa fa-question-circle"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="topology-level"
                  ng-if="!emptyProps"
                  collapse = "isReqPropsCollapsed[requirementName]">
                  <table class="table table-condensed" id="requirement_{{requirementName}}_properties">
                    <tr ng-repeat="(propertyKey,propertyValue) in selectedNodeTemplate.requirements[requirementName].properties"
                       ng-init="isPropertyRequired = isCapabilityPropertyRequired(propertyKey)">
                        <!-- TODO manage edition / input / output of requirements properties-->
                      <td class="col-md-6" ng-class="{'property-required' : isPropertyRequired}">
                        <span ng-if="isPropertyRequired" tooltip="{{'REQUIRED' | translate}}"
                          tooltip-append-to-body="true">{{propertyKey}} *</span>
                        <span ng-if="!isPropertyRequired" tooltip="{{'OPTIONAL' | translate}}"
                          tooltip-append-to-body="true">{{propertyKey}}</span>
                      </td>
                      <td class="col-md-6" id="p_req_{{requirementName}}_{{propertyKey}}" ng-class="{'property-required' : isPropertyRequired}">
                        <span> {{propertyValue || '...'}} </span>
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- Capabilities -->
          <div ng-if="checkMapSize(selectedNodeTemplate.capabilities)">
            <div class="topology-node-expand clickable"
              ng-click="isCapabilitiesCollapsed = !isCapabilitiesCollapsed">
              <i class="pull-left fa"
                ng-class="{'fa-chevron-down' : !isCapabilitiesCollapsed, 'fa-chevron-right': isCapabilitiesCollapsed}"></i>
              <span>{{'APPLICATIONS.TOPOLOGY.CAPABILITIES' | translate}}</span>
            </div>
            <div collapse="isCapabilitiesCollapsed" class="topology-level">
              <div ng-repeat="(capabilityName,capability) in selectedNodeTemplate.capabilities"
                ng-init ="isReqPropsCollapsed = {}; emptyProps = !checkMapSize(selectedNodeTemplate.capabilities[capabilityName].properties)">
                <div class="topology-node-expand" style="font-weight: normal"
                  ng-class="{'clickable' : !emptyProps}"
                  ng-click="isReqPropsCollapsed[capabilityName] = !isReqPropsCollapsed[capabilityName]">
                  <div class="row">
                    <div class="col-md-3 ">
                     <i ng-if = "!emptyProps" class="pull-left fa"
                        ng-class="{'fa-chevron-down' : !isReqPropsCollapsed[capabilityName], 'fa-chevron-right': isReqPropsCollapsed[capabilityName]}">
                      </i>
                      <span>{{capabilityName}}</span>
                    </div>
                    <div class="col-md-3" id="capability-{{capabilityName}}">
                      <span  tooltip="{{capability.type}}"
                        tooltip-append-to-body="true" >{{getShortName(capability.type)}}</span>
                    </div>
                    <div class="col-md-4">
                      <span class="btn-group pull-right">
                        <span  class="btn btn-default btn-xs cardinalities_show"
                        tooltip="{{'APPLICATIONS.TOPOLOGY.CARDINALITIES_TOOLTIP' | translate}}"
                        tooltip-append-to-body="true">
                            {{capability.upperBound | replaceAll:'unbounded':'&infin;' }}
                            ({{capability.canAddRel.remaining | replaceAll:'unbounded':'&infin;' }})
                        </span>
                      </span>
                    </div>
                    <div class="col-md-1" ng-init="capaComp = getComponent(selectedNodeTemplate, capability.type)">
                      <button id="btn-description-{{capability.type}}"
                      ng-if="capaComp.data.description"
                      ng-click="openSimpleModal('MODAL.TITLE.CAPABILITY', capaComp.data.description)"
                      class="btn btn-default btn-xs"
                      tooltip="{{ 'MODAL.TITLE.CAPABILITY' | translate}}"
                      tooltip-append-to-body="true">
                      <i class="fa fa-question-circle"></i>
                    </button>
                    </div>
                  </div>
                </div>
                <div class="topology-level"
                  ng-if="!emptyProps"
                  collapse = "isReqPropsCollapsed[capabilityName]">
                  <table class="table table-condensed" id="capability_{{capabilityName}}_properties">
                    <tr ng-repeat="(propertyKey,propertyValue) in selectedNodeTemplate.capabilities[capabilityName].properties"
                       ng-init="isPropertyRequired = isCapabilityPropertyRequired(propertyKey)">
                      <td class="col-md-6" ng-class="{'property-required' : isPropertyRequired}">
                        <span ng-if="isPropertyRequired" tooltip="{{'REQUIRED' | translate}}"
                          tooltip-append-to-body="true">{{propertyKey}} *</span>
                        <span ng-if="!isPropertyRequired" tooltip="{{'OPTIONAL' | translate}}"
                          tooltip-append-to-body="true">{{propertyKey}}</span>
                      </td>
                      <td class="col-md-6" id="p_capa_{{capabilityName}}_{{propertyKey}}" ng-class="{'property-required' : isPropertyRequired}">
                        <span> {{propertyValue.value}} </span>
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- Relationships -->
          <div ng-if="checkMapSize(selectedNodeTemplate.relationships)">
            <div class="topology-node-expand clickable"
              ng-click="isRelationshipsCollapsed = !isRelationshipsCollapsed">
              <i class="pull-left fa"
                ng-class="{'fa-chevron-down' : !isRelationshipsCollapsed, 'fa-chevron-right': isRelationshipsCollapsed}"></i><span>{{'APPLICATIONS.TOPOLOGY.RELATIONSHIPS' | translate}}</span>
            </div>
            <div collapse="isRelationshipsCollapsed">
              <div class="topology-level"
                ng-repeat="(relationshipName,relationshipDefinition) in selectedNodeTemplate.relationships">

                <div class="topology-node-expand clickable editable-small"
                  ng-click="isRelationshipCollapsed = !isRelationshipCollapsed"
                  id ="relationship_{{relationshipName}}">
                  <i class="pull-left fa"
                    ng-class="{'fa-chevron-down' : !isRelationshipCollapsed, 'fa-chevron-right': isRelationshipCollapsed}"></i>
                  <span
                    ng-init="relNameObj[relationshipName] = relationshipName"
                    editable-text="relNameObj[relationshipName]" ng-if="editRights"  buttons="no" e-required onbeforesave="updateRelationshipName(relationshipName, $data)" blur="submit" ng-click="$event.stopPropagation();"
                    tooltip="{{relationshipName | split:15}}" tooltip-append-to-body="true">
                    {{relationshipName | truncate:25}}
                    <i class="fa fa-pencil-square-o"></i>
                  </span>
                  <span ng-if="!editRights" tooltip="{{relationshipName}}" tooltip-append-to-body="true">
                    {{relationshipName  | truncate:25}}
                  </span>
                  <span class="pull-right">
                    <delete-confirm id="btn-delete-rl-{{relationshipName}}" func="removeRelationship(relationshipName, selectedNodeTemplate)"
                      position="left" bssize="btn-xs" fastyle="fa-unlink">
                    </delete-confirm>
                  </span>
                </div>

                <div class="topology-level" collapse="isRelationshipCollapsed">
                  <div class="row">
                    <div class="col-md-3">{{'APPLICATIONS.TOPOLOGY.TYPE' | translate}}</div>
                    <div class="col-md-9">{{relationshipDefinition.type}}</div>
                  </div>
                  <div class="row">
                    <div class="col-md-3">{{'COMPONENTS.RELATIONSHIPS.TARGET' | translate}}</div>
                    <div class="col-md-9">{{relationshipDefinition.target | split}}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div ng-if="isComputeType(selectedNodeTemplate) && topology.topology.scalingPolicies[selectedNodeTemplate.name]">
            <div class="topology-node-expand clickable"
              ng-click="isScalingPolicyCollapsed = !isScalingPolicyCollapsed">
              <i class="pull-left fa"
                ng-class="{'fa-chevron-down' : !isScalingPolicyCollapsed, 'fa-chevron-right': isScalingPolicyCollapsed}"></i>
              <span>{{'APPLICATIONS.TOPOLOGY.SCALING_POLICY' | translate}}</span>
            </div>
            <div collapse="isScalingPolicyCollapsed">
              <table class="table table-condensed">
                <tr
                  ng-repeat="(policyFieldName,policyFieldValue) in topology.topology.scalingPolicies[selectedNodeTemplate.name]">
                  <td>{{policyFieldName}}</td>
                  <td id="{{policyFieldName}}">
                    <span ng-show="editRights" editable-number="topology.topology.scalingPolicies[selectedNodeTemplate.name][policyFieldName]" buttons="no" e-required onbeforesave="updateScalingPolicy(policyFieldName, $data)" blur="submit">
                      {{policyFieldValue}} <i class="fa fa-pencil-square-o"></i>
                    </span>
                    <span ng-show="!editRights">{{policyFieldValue}}</span>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </tab>
    </tabset>
  </div>
</div>
