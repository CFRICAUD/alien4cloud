<div ng-controller="AuditController">

  <h2>Application Audit</h2>

  <p>

    <!-- <button type="button" class="btn btn-primary" ng-click="refreshAuditTraces()">
      <span class="fa fa-refresh"></span>&nbsp;{{'metrics.refresh.button' | translate}}
    </button> -->

    <form class="form-horizontal">
      <div class="form-group">
        <label class="col-sm-2 control-label">Group by</label>
        <div class="col-sm-10">
          <select class="form-control" name="grouping" ng-model="groupby" ng-options="c as c for c in categories">
            <option value=""></option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 control-label">Visible column</label>
        <div class="col-sm-10">
          <p class="form-control-static">
            <label class="checkbox-inline" ng-repeat="column in columns">
                <input type="checkbox" ng-model="column.visible" /> {{column.title}}
            </label>
          </p>
        </div>
      </div>
    </form>

    <table ng-table="auditTableParam" show-filter="true" template-pagination="custom/pager" class="table">

      <thead>
        <tr>
          <th ng-repeat="column in columns" ng-show="column.visible"
              class="text-center sortable" ng-class="{
                  'sort-asc': auditTableParam.isSortBy(column.field, 'asc'),
                  'sort-desc': auditTableParam.isSortBy(column.field, 'desc')
                }"
              ng-click="auditTableParam.sorting(column.field, tableParams.isSortBy(column.field, 'asc') ? 'desc' : 'asc')">
              {{column.title}}
          </th>
        </tr>
      </thead>

      <tbody ng-repeat="group in $groups">
        <tr class="ng-table-group">
            <td colspan="{{$columns.length}}">
                <a href="" ng-click="group.$hideRows = !group.$hideRows">
                    <i class="pull-left fa" ng-class="{'fa-chevron-down' : !group.$hideRows, 'fa-chevron-right': group.$hideRows}"></i>
                    <strong>{{ group.value }}</strong>
                </a>
            </td>
        </tr>

        <tr ng-hide="group.$hideRows" ng-repeat="trace in group.data">
            <td ng-repeat="column in columns" ng-show="column.visible" sortable="column.field">
                {{trace[column.field]}}
            </td>
            <!-- <td sortable="timestamp" data-title="'Date'">
              {{trace.timestamp | date:'dd-MM-yyyy HH:mm:ss Z' }}
            </td>
            <td sortable="userName" data-title="'User Name'">
              {{trace.userName}}
            </td>
            <td sortable="category" data-title="'Category'">
              {{trace.category}}
            </td>
            <td sortable="action" data-title="'Action'">
              {{trace.category}}
            </td>
            <td sortable="method" data-title="'Method'">
              {{trace.method}}
            </td>
            <td sortable="responseStatus" data-title="'Response status'">
              {{trace.responseStatus}}
            </td> -->
        </tr>

      </tbody>

      <tfoo></tfoo>

    </table>

  </p>

  <!-- custom pager -->
  <script type="text/ng-template" id="custom/pager">
      <ul class="pager ng-cloak">
        <li ng-repeat="page in pages"
              ng-class="{'disabled': !page.active, 'previous': page.type == 'prev', 'next': page.type == 'next'}"
              ng-show="page.type == 'prev' || page.type == 'next'" ng-switch="page.type">
          <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo; Previous</a>
          <a ng-switch-when="next" ng-click="params.page(page.number)" href="">Next &raquo;</a>
        </li>
          <li>
          <div class="btn-group">
              <button type="button" ng-class="{'active':params.count() == 10}" ng-click="params.count(10)" class="btn btn-default">10</button>
              <button type="button" ng-class="{'active':params.count() == 25}" ng-click="params.count(25)" class="btn btn-default">25</button>
              <button type="button" ng-class="{'active':params.count() == 50}" ng-click="params.count(50)" class="btn btn-default">50</button>
              <button type="button" ng-class="{'active':params.count() == 100}" ng-click="params.count(100)" class="btn btn-default">100</button>
          </div>
          </li>
      </ul>
  </script>

</div>
